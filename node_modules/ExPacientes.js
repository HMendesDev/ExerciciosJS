const prompt = require('prompt-sync')();

let pacientes = [     
    {nome: "João", idade: 65, peso: 80, altura: 1.75, condicao: "grave"},     
    {nome: "Maria", idade: 58, peso: 70, altura: 1.68, condicao: "moderada"},     
    {nome: "Pedro", idade: 45, peso: 85, altura: 1.82, condicao: "leve"},     
    {nome: "Ana", idade: 70, peso: 65, altura: 1.60, condicao: "grave"},     
    {nome: "Carlos", idade: 50, peso: 90, altura: 1.78, condicao: "moderada"}, 
]
let opcao = 0 
 
while(true){

    menu()
    opcao = Number(prompt(`Qual opção deseja - `))
    switch (opcao)
    {
        case 1: cadastraPaciente(pacientes);break
        case 2: consultaPacientes(pacientes);break
        case 3: console.log(`\nPaciente com maior risco = `,pacienteMaiorRisco(pacientes),`\n`);break
        case 4: console.log(`\n Média das idades dos pacientes = `, mediaIdades(pacientes).toFixed(2),`\n`);break
        case 5: console.log(`\nEncerrando programa......\n`);return 0
        default: console.log(`\nOpção invalida!\n`);break
    }

}

function cadastraPaciente(vetPacientes)
{
        vetPacientes.push({
            nome: prompt("Nome = "),
            idade: Number(prompt("Idade = ")),
            peso: Number(prompt("Peso = ")),
            altura: Number(prompt("Altura = ")),
            condicao: prompt("Condição = ")
        });  
}
function consultaPacientes(vetPacientes)
{
    console.log(`Pacientes \n`)
    for (let i = 0; i < vetPacientes.length; i++) {
        console.log(`Nome = `,vetPacientes[i].nome)
        console.log(`Idade = `,vetPacientes[i].idade)
        console.log(`Peso = `,vetPacientes[i].peso)
        console.log(`Altura = `,vetPacientes[i].altura)
        console.log(`Condição = `,vetPacientes[i].condicao,`\n`)
    }
}
function pacienteMaiorRisco(vetPacientes)
{
    let paciente_risco = vetPacientes[0]
    for (let i = 0; i < vetPacientes.length; i++) {
        if (vetPacientes[i].condicao == "grave")
            {
                if (vetPacientes[i].idade > paciente_risco.idade)
                {
                    paciente_risco = vetPacientes[i]
                }
                else if(vetPacientes[i].idade == paciente_risco.idade && vetPacientes[i].peso > paciente_risco.peso)
                {
                    paciente_risco = vetPacientes[i]
                }
            }  
    }
    return paciente_risco
}
function mediaIdades(vetPacientes)
{
    let soma_idades = 0,contador_idade = 0
    for (let i = 0; i < vetPacientes.length; i++) {
        soma_idades = soma_idades + vetPacientes[i].idade
        contador_idade++
    }
    return soma_idades / contador_idade
}
function menu()
{
    console.log(`\n1 - Cadastrar um novo paciente`)
    console.log(`2 - Consultar todos os pacientes e suas informações`)
    console.log(`3 - Determinar e exibir o paciente de maior risco`)
    console.log(`4 - Calcular e exibir a média das idades dos pacientes`)
    console.log(`5 - Encerrar o programa\n`)
}